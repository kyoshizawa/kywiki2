# はじめに

本書は、株式会社日本カードネットワークが提供するＣＡＲＤＮＥＴオンライン接続サービスにおいて、ＩＣクレジットカード取引にて発生するＩＣ電文または各種バッチ成果物に設定されるＩＣカード関連データの項目についての参考資料として、ブランド毎の設定内容を記述したものです。ＣＡＲＤＮＥＴセンターにて電文上の各項目の設定内容についての保証はいたしません。ＩＣカード関連データ項目の詳細については、各ブランドまでお問い合わせください。

関連事項については、「ＣＡＲＤＮＥＴオンライン接続サービス　ドキュメント体系説明書」をご参照のうえ、ご確認ください。

---

# 第１章　ＩＣカード関連データ概要

ＩＣカード関連データは、ＩＣクレジットカードのＩＣチップに格納されているデータおよびＩＣクレジットカード対応オンライン端末がＩＣ処理の結果として設定するデータにより構成されている。

その構成要素として、ＩＣクレジットカードの会員番号やＩＣクレジットカード取引を行うために必要となる各種パラメータ情報が設定されている。

これらの情報は、ＴＬＶ（Ｔａｇ／Ｌｅｎｇｔｈ／Ｖａｌｕｅ）形式にて記述されており、ＣＡＲＤＮＥＴオンライン接続サービスにおいては、この形式のままデータの授受を行う。

本章では、ＣＮ手順のＩＣ電文中および各種バッチ成果物に設定されるＩＣカード関連データの概要について記述する。

## １．１　ＩＣカード関連データの設定対象

ＩＣカード関連データは、以下の電文およびバッチ成果物に設定される。

表１－１　ＩＣカード関連データの設定対象

| 種類 | 対象 |
|---|---|
| 電文 | オーソリ（ＡＲＱＣ）、ＩＣオーソリアドバイス、ＩＣ売上アドバイス |
| バッチ成果物 | ＩＣカード関連情報 |

## １．２　ＩＣカード関連データの設定方法

ＩＣカード関連データには、各ブランド毎に定義されたＩＣクレジットカード情報が電文項目に設定される。

また、各ブランド共通で必須の項目を含め、各ブランド単位で最大値２５５バイトを超えない範囲で設定内容が決定される。

【図】図１－１　ＩＣクレジットカード情報の設定方法

### １．２．１　ＩＣクレジットカード情報のタグ定義方法

各ＩＣクレジットカード情報のタグは、４ビット単位で１６進表示する２桁（１バイト）である。
ただし、下位ビットがALL「1」であるタグは、４桁（２バイト）である。

#### 例１　5Aの場合

【図】タグ構成例（5Aの場合）

１バイト目のbit5～bit1がALL「1」ではない。

#### 例２　9F2Aの場合

【図】タグ構成例（9F2Aの場合）

１バイト目のbit5～bit1がALL「1」のため、２バイトタグとなる。

---

長さフィールドは、bit8が0の場合、bit7～bit1で長さを表す（１バイト）。
bit8が1の場合は、bit7～bit1で長さフィールドの長さを表し（１バイト目を含まない）、２バイト目以降で長さを表す。

#### 例３　データの長さが3バイトの場合

【図】長さフィールド例（3バイト）

長さフィールドは1バイト、長さは3バイト。

#### 例４　データの長さが128バイトの場合

【図】長さフィールド例（128バイト）

長さフィールドは1バイトではなく、2バイト目から長さを示す。長さは128バイト。

## １．３　データコード

ＩＣカード関連データにおける属性、文字属性は以下の定義に従って記述する。

| 属性 | 定義内容 |
|---|---|
| binary | バイナリコード |
| bit | バイナリコードのbit、bit表現（2進数）に意味を持つもの |
| BCD | BCDコード（4bit単位で0～9を表現） |
| C | キャラクタコード。本書ではJIS8コードとする |
| a | 英字 |
| an | 英数字 |
| cn | 左詰めの数字 |
| n | 右詰めの数字 |
